<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>보건학데이터과학 실습 - 4&nbsp; Data Manipulation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./245_datamanipulation_for_table.html" rel="next">
<link href="./231_dataimportsave.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.27/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


</head>

<body class="nav-sidebar floating">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Manipulation</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">보건학데이터과학 실습</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">소개</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">I. R 기본</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./210_randrstudio.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R &amp; R studio 사용</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./221_Rbasic1.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R 속성</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./231_dataimportsave.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">데이터 불러오기</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./241_datamanipulation.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Manipulation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">II. 데이터 시각화</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./245_datamanipulation_for_table.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipulation for table_1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./247_datamanipulation_for_table_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Manipulation for table_2</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Summary</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">참고문헌</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#dplyr-tidyverse" id="toc-dplyr-tidyverse" class="nav-link active" data-scroll-target="#dplyr-tidyverse"><span class="toc-section-number">4.1</span>  dplyr (tidyverse)</a></li>
  <li><a href="#실습-데이터-준비" id="toc-실습-데이터-준비" class="nav-link" data-scroll-target="#실습-데이터-준비"><span class="toc-section-number">4.2</span>  실습 데이터 준비</a></li>
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select"><span class="toc-section-number">4.3</span>  select</a></li>
  <li><a href="#filter" id="toc-filter" class="nav-link" data-scroll-target="#filter"><span class="toc-section-number">4.4</span>  filter</a></li>
  <li><a href="#arrange" id="toc-arrange" class="nav-link" data-scroll-target="#arrange"><span class="toc-section-number">4.5</span>  arrange</a></li>
  <li><a href="#mutate" id="toc-mutate" class="nav-link" data-scroll-target="#mutate"><span class="toc-section-number">4.6</span>  mutate</a></li>
  <li><a href="#group_by" id="toc-group_by" class="nav-link" data-scroll-target="#group_by"><span class="toc-section-number">4.7</span>  group_by</a></li>
  <li><a href="#merge-join" id="toc-merge-join" class="nav-link" data-scroll-target="#merge-join"><span class="toc-section-number">4.8</span>  merge, join</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Manipulation</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<iframe width="560" height="315" src="https://www.youtube.com/embed/dTKrAXXmqrw?si=1Lq35jP_6Toyo918" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
</iframe>
<section id="dplyr-tidyverse" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="dplyr-tidyverse"><span class="header-section-number">4.1</span> dplyr (tidyverse)</h2>
<p>데이터를 모으는 입장과 데이터를 분석하는 입장은 매우 다릅니다. 데이터를 모을 때는 모으는 연구자의 입장에서 하게되고, 이를 분석하는 연구자에 맞도록 변형하는 과정이 필요합니다. 또한 표를 만들거나 도표를 만드는 과정에서 데이터의 모양을 우리가 원하는 데로 변형할 필요가 있습니다. R에서 이과정을 쉽게 하기 위해 가장 많이 사용되는 것이 dplyr (tidyverse) 입니다. 이를 이용해서 실습해 보겠습니다</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"tidyverse"</span>)) <span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"htmlTable"</span>)) <span class="fu">install.packages</span>(<span class="st">"htmlTable"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"haven"</span>)) <span class="fu">install.packages</span>(<span class="st">"haven"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"DT"</span>)) <span class="fu">install.packages</span>(<span class="st">"DT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="실습-데이터-준비" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="실습-데이터-준비"><span class="header-section-number">4.2</span> 실습 데이터 준비</h2>
<p>데이터 표를 만드는 실습은 6차 근로환경조사 자료를 통해 실습할 것입니다.. 자료는 안전보건공단, 근로환경조사 원시자료 사이트 (http://kosha.or.kr/kosha/data/primitiveData.do) 에서 신청할 수 있습니다.. 데이터를 불러오겠습니다. 안전보건공단 홈페이에서 자료를 다운 받는게 원칙입니다. 다만 실습을 빠르게 진행하기 위해서, dspubs.org 페이지에 있는 파일을 이용하겠습니다. <br> <a href="https://raw.githubusercontent.com/jinhaslab/opendata/main/kwcs/kwcsData6th.rds"> kwcsData6th.rds </a> <br> 자신의 folder에 data 라는 folder가 있는지 확인하십시오. data라는 폴더에 다운로드하고, 불러오도록 하겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/jinhaslab/opendata/main/kwcs/kwcsData6th.rds"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url, <span class="st">"data/tutorKWCS.rds"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>kwcs <span class="ot">=</span> <span class="fu">readRDS</span>(<span class="st">"data/tutorKWCS.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>데이터 10개만 살펴보겠습니다. 이때 head()는 처음 10개, tail() 은 뒤에 10개, slice(5:15) 은 5번째부터 15번째 까지 입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span> DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-73eb27aad32608b9bd19" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-73eb27aad32608b9bd19">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],[2,3,6,8,9,10],[0.13726262,0.350073833,0.156242513,0.227703402,0.167653177,0.675384949],[3,3,7,7,7,6],[1,1,1,3,1,4],[2,2,2,1,1,2],[1966,1956,1955,1962,1982,1973],[1,1,2,3,1,1],[0,0,0,1,0,0],[null,null,null,2,null,1],[null,null,null,1963,null,1969],[null,null,null,1,null,1],[null,null,null,0,null,1],[null,null,null,1,null,2],[null,null,null,1992,null,1993],[null,null,null,5,null,3],[null,null,null,2,null,2],[null,null,null,null,null,1],[null,null,null,null,null,1995],[null,null,null,null,null,5],[null,null,null,null,null,2],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[1,1,1,2,1,1],[1966,1956,1955,1963,1982,1973],[1,1,2,1,1,1],[54,64,65,57,38,47],[1,1,1,1,1,1],["","","","","",""],[1,1,1,1,1,1],[null,null,null,null,null,null],[null,null,null,null,null,null],["","","","","",""],[3,3,3,1,3,3],[null,null,null,1,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[1,3,1,null,1,1],[1,2,2,null,2,1],[5,null,null,null,null,1],[5,null,null,null,null,0],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[1,null,null,null,null,2],[null,2,2,null,2,null],[1,null,1,null,1,1],[2,null,1,null,1,3],["","","","","",""],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],["","","","","",""],[1,2,1,null,1,1],[2,1,1,null,1,1],[2,2,2,null,2,1],[2,2,2,null,2,2],[null,null,null,1,null,null],[null,null,null,2,null,null],[null,null,null,2,null,null],[null,null,null,2,null,null],[null,null,null,2,null,null],[null,null,null,1,null,null],[1,1,1,2,2,1],[1,1,1,null,null,1],[8,5,8,null,null,8],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,1,3,null],[1,1,1,1,1,1],[5,2,5,6,6,5],[null,null,null,null,null,null],[1,1,1,1,1,1],[40,10,40,52,48,40],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[120,60,30,10,null,40],[null,null,null,null,1,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,1,1,1,null,1],[null,15,30,40,null,40],[null,null,null,null,null,null],[2,1,1,1,4,1],["","","","","",""],[1,1,1,1,1,1],[2,1,5,1,2,4],[0,0,0,0,0,0],[null,null,null,null,null,null],[5,null,3,null,3,4],[2,null,1,null,3,2],[0,0,1,0,0,2],[null,null,null,null,null,null],[null,null,null,null,null,null],[1,1,0,1,1,0],[10,30,0,7,10,0],[3,3,null,5,3,3],[2,2,null,2,2,2],[2,2,null,1,2,2],[2,2,null,2,2,2],[2,2,null,2,2,2],[2,2,null,2,2,2],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[7,6,6,6,7,7],[7,6,6,6,7,7],[7,6,6,6,7,7],[7,6,6,6,7,7],[7,6,6,6,7,7],[7,6,6,6,7,7],[7,6,6,6,7,7],[7,6,6,6,7,7],[7,6,5,6,7,7],[6,3,2,1,7,5],[6,6,3,7,7,7],[6,3,3,7,7,6],[2,2,6,1,7,5],[6,2,1,7,7,4],[3,2,1,2,7,6],[6,2,6,7,7,5],[6,2,6,7,7,6],[6,2,6,7,7,6],[2,4,2,null,null,1],[4,null,6,null,4,5],[4,null,6,null,null,6],[6,null,6,null,null,null],[2,1,2,1,1,2],[2,1,2,1,5,2],[5,5,5,5,5,5],[5,5,5,5,5,5],[null,null,null,null,null,null],["","","","","",""],[2,2,2,2,1,2],[4,4,4,4,4,4],[0,0,0,0,0,0],[0,1,0,1,1,0],[0,1,0,1,1,0],[0,0,0,1,0,0],[null,null,null,null,null,null],[null,2,null,4,4,null],[null,1,null,4,4,null],[null,null,null,26,null,null],[2,2,2,1,1,2],[1,1,2,1,2,1],[1,2,1,1,2,1],[1,2,1,1,2,1],[1,2,1,1,2,1],[2,2,2,2,2,2],[null,null,null,null,null,null],["","","","","",""],[null,null,5,5,null,5],[1,2,1,4,2,1],[2,1,2,null,2,2],[null,2,null,null,null,null],["","","","","",""],[1,1,2,3,2,2],[5,4,4,5,5,5],[4,3,4,5,5,4],[5,3,4,5,5,4],[5,4,4,5,5,5],[5,4,4,5,5,5],[null,null,4,5,1,5],[5,5,4,1,1,5],[4,4,3,4,2,2],[1,1,2,2,2,2],[1,1,2,2,2,2],[3,3,3,2,7,6],[2,1,3,2,7,6],[2,null,1,null,2,2],[2,2,2,1,2,2],[2,2,1,null,2,2],[2,2,1,null,2,2],[2,1,1,null,2,2],[4,4,4,3,4,4],[null,null,null,1,null,null],[2,2,2,2,2,2],[2,1,1,2,1,2],[2,2,2,2,2,2],[1,1,1,1,1,1],[2,2,2,2,2,2],[1,2,2,2,1,2],[1,1,2,2,1,1],[1,1,2,2,1,2],[1,1,2,2,1,2],[4,1,2,null,2,2],[4,1,4,4,2,2],[4,4,4,4,2,3],[1,2,2,2,2,1],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,4],[null,null,null,null,null,5],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],["","","","","",""],[2,2,2,2,1,2],[2,2,2,2,2,2],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,2,null,2,1],[null,null,2,null,2,1],[null,null,2,null,2,2],[null,null,3,null,2,4],[null,null,3,null,2,3],[4,3,5,3,2,3],[1,3,3,3,2,2],[1,3,3,3,1,2],[1,3,3,3,1,3],[1,3,3,3,1,2],[1,3,3,3,1,2],[1,4,3,2,4,4],[3,4,3,3,1,2],[3,3,2,3,3,3],[1,1,1,2,null,2],[2,1,1,null,2,2],[2,1,1,null,2,2],[null,1,3,null,null,null],[null,1,2,null,null,null],[2,null,1,null,1,2],[1,null,3,null,1,1],[1,null,3,null,1,1],[1,null,3,null,1,1],[1,null,3,null,1,1],[1,null,3,null,1,1],[1,2,2,2,1,2],[1,2,1,null,1,2],[2,2,2,2,2,2],[2,2,1,2,2,2],[1,null,4,null,3,null],[null,null,null,null,null,null],[1,null,3,null,2,null],[null,2,null,null,null,2],[1,null,2,null,2,2],[1,null,2,null,2,2],[1,null,3,null,2,2],[null,null,3,null,2,2],[1,null,3,null,2,2],[1,null,2,null,2,2],[2,null,2,null,2,2],[2,null,2,null,2,2],[2,null,1,null,1,2],[3,3,3,null,3,3],[2,2,2,2,2,2],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[1,3,3,3,1,1],[1,2,4,4,1,2],[2,2,2,1,2,2],[3,3,3,2,3,3],[null,null,null,1,null,null],[null,null,null,3,null,null],[2,2,2,1,2,2],[2,2,1,1,2,2],[2,2,1,1,2,2],[1,1,1,1,2,2],[2,2,2,2,2,2],[1,1,1,2,2,2],[null,null,null,null,null,null],["","","","","",""],[null,null,null,1,null,null],[null,null,2,1,null,null],[null,null,1,2,null,null],[1,1,1,2,null,null],[null,null,null,null,null,null],[1,2,1,null,null,null],[null,null,null,null,null,null],[5,2,5,3,5,5],[5,2,5,4,5,4],[5,2,5,4,5,5],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[0,0,0,0,0,0],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[2,2,2,2,2,2],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[1,5,5,3,1,2],[1,5,5,3,1,2],[1,5,5,4,1,2],[2,5,5,3,1,3],[3,5,5,3,1,3],[2,2,2,1,1,2],[2,3,3,2,1,2],[2,4,2,4,1,2],[2,3,2,3,1,2],[null,3,2,2,5,4],[null,3,2,3,3,2],[null,4,2,5,5,5],[2,5,2,5,null,2],[2,3,3,3,2,2],[2,3,2,3,2,2],[2,3,2,3,2,2],[2,3,2,3,4,4],[3,4,2,3,4,4],[null,null,null,4,null,null],[null,null,null,3,null,null],[null,null,null,1,null,null],[null,null,null,1,null,null],[3,4,3,4,4,3],[3,4,3,4,4,3],[3,4,3,2,4,3],[3,4,3,4,3,3],[3,4,3,4,3,3],[60,70,70,65,null,null],[null,null,null,null,1,1],[null,null,null,null,null,null],[null,null,null,null,null,null],[1,null,null,null,1,null],[null,1,1,1,null,null],[5,5,null,5,null,5],[5,5,null,5,null,5],[1,1,1,1,2,1],[1,1,5,5,1,2],[5,5,5,5,1,5],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[1,3,1,3,null,2],[30,0,20,10,null,0],[null,null,null,null,null,null],[null,null,null,null,null,null],[1,1,null,null,1,null],[0,0,null,null,10,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,8,null],[null,null,null,null,20,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[1,1,1,1,1,3],[2,4,2,6,1,3],[1,2,1,null,1,1],[2,1,2,null,2,2],[2,2,2,null,2,2],[2,2,2,null,2,2],[2,2,2,null,2,2],[2,2,2,null,2,2],[2,2,2,null,2,2],[2,2,1,null,2,2],[2,2,2,null,2,2],[2,2,2,null,2,2],[null,3,null,null,null,null],[null,null,null,3,null,null],[200,100,100,150,150,250],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[200,100,100,150,150,250],[6,4,2,4,7,4],[2,2,1,2,2,2],[2,2,2,2,1,2],[5,6,6,5,3,4],[3,3,7,7,7,6],[1,1,1,1,1,1],[3,3,3,1,3,3],[2,4,2,1,2,2],[4,9,8,4,2,5],["421","951","854","441","248","510"],[16,20,3,9,19,7],["85","97","30","56","94","47"],[2,1,5,1,2,4],[2,1,3,1,2,3],[1,1,1,1,1,1],[2,1,5,1,2,4],[40,10,40,52,48,40],[3,1,3,3,3,3],[4,1,4,5,4,4],[4,3,1,3,4,3],[2,1,1,1,1,2],[6,6,1,5,6,1],[0,3,0,2,0,0],[0,3,0,1,0,1],[0,3,0,1,0,0],["0.non distrubance","1.sleep disturbance","0.non distrubance","0.non distrubance","0.non distrubance","0.non distrubance"],["0.balance","0.balance","0.balance","1.non balance","0.balance","0.balance"],["0.Never","1.Rarely","1.Rarely","0.Never","0.Never","0.Never"],["1.Rarely","2.Sometimes","1.Rarely","0.Never","0.Never","1.Rarely"],["0.Never","2.Sometimes","1.Rarely","0.Never","0.Never","1.Rarely"],["0.Never","1.Rarely","1.Rarely","0.Never","0.Never","0.Never"],["0.Never","1.Rarely","1.Rarely","0.Never","0.Never","0.Never"],["Women","Women","Women","Women","Men","Women"],["&lt;55","≥60","≥60","&lt;60","&lt;40","&lt;50"],["0.university or more","1.high school","2.middle school or below","1.high school","0.university or more","1.high school"],["0.one-job","0.one-job","0.one-job","0.one-job","0.one-job","0.one-job"],["no-pain","no-pain","no-pain","pain","no-pain","no-pain"],["0.paid-worker","0.paid-worker","0.paid-worker","2.own-account worker","0.paid-worker","0.paid-worker"],["&lt;52","&lt;35","&lt;52","&lt;60","&lt;52","&lt;52"],["0.non shift work","0.non shift work","0.non shift work","0.non shift work","0.non shift work","0.non shift work"],["0.non short return","0.non short return","0.non short return","1.short return","1.short return","0.non short return"],[3,3,3,4,4,3],["0.day work","0.day work","0.day work","1.day work with short return","1.day work with short return","0.day work"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>wt<\/th>\n      <th>area<\/th>\n      <th>hh_num<\/th>\n      <th>hm_01_gender<\/th>\n      <th>hm_01_year<\/th>\n      <th>hm_01_estat<\/th>\n      <th>hm_01_rel_t<\/th>\n      <th>hm_02_gender<\/th>\n      <th>hm_02_year<\/th>\n      <th>hm_02_estat<\/th>\n      <th>hm_02_rel_t<\/th>\n      <th>hm_03_gender<\/th>\n      <th>hm_03_year<\/th>\n      <th>hm_03_estat<\/th>\n      <th>hm_03_rel_t<\/th>\n      <th>hm_04_gender<\/th>\n      <th>hm_04_year<\/th>\n      <th>hm_04_estat<\/th>\n      <th>hm_04_rel_t<\/th>\n      <th>hm_05_gender<\/th>\n      <th>hm_05_year<\/th>\n      <th>hm_05_estat<\/th>\n      <th>hm_05_rel_t<\/th>\n      <th>hm_06_gender<\/th>\n      <th>hm_06_year<\/th>\n      <th>hm_06_estat<\/th>\n      <th>hm_06_rel_t<\/th>\n      <th>hm_07_gender<\/th>\n      <th>hm_07_year<\/th>\n      <th>hm_07_estat<\/th>\n      <th>hm_07_rel_t<\/th>\n      <th>hm_08_gender<\/th>\n      <th>hm_08_year<\/th>\n      <th>hm_08_estat<\/th>\n      <th>hm_08_rel_t<\/th>\n      <th>hm_09_gender<\/th>\n      <th>hm_09_year<\/th>\n      <th>hm_09_estat<\/th>\n      <th>hm_09_rel_t<\/th>\n      <th>hm_10_gender<\/th>\n      <th>hm_10_year<\/th>\n      <th>hm_10_estat<\/th>\n      <th>hm_10_rel_t<\/th>\n      <th>target<\/th>\n      <th>YEAR<\/th>\n      <th>ESTAT<\/th>\n      <th>AGE<\/th>\n      <th>country<\/th>\n      <th>country_etc<\/th>\n      <th>job1<\/th>\n      <th>job2<\/th>\n      <th>job3<\/th>\n      <th>job3_etc<\/th>\n      <th>emp_type<\/th>\n      <th>selfemp_cate1<\/th>\n      <th>selfemp_cate2<\/th>\n      <th>selfemp_cate3<\/th>\n      <th>selfemp_cate4<\/th>\n      <th>selfemp_cate5<\/th>\n      <th>selfemp_cate6<\/th>\n      <th>selfemp_cate7<\/th>\n      <th>selfemp_cate8<\/th>\n      <th>emp_stat<\/th>\n      <th>emp_con_term<\/th>\n      <th>emp_con_period_y<\/th>\n      <th>emp_con_period_m<\/th>\n      <th>emp_con_period_77<\/th>\n      <th>emp_con_period_88<\/th>\n      <th>emp_con_period_99<\/th>\n      <th>emp_con_renew<\/th>\n      <th>emp_noncon<\/th>\n      <th>emp_keep<\/th>\n      <th>emp_keep2<\/th>\n      <th>emp_keep2_etc<\/th>\n      <th>emp_expect<\/th>\n      <th>emp_expect_mon<\/th>\n      <th>emp_expect2<\/th>\n      <th>emp_expect2_etc<\/th>\n      <th>emp_fptime<\/th>\n      <th>emp_wage<\/th>\n      <th>emp_stat_sp<\/th>\n      <th>emp_place<\/th>\n      <th>selfemp_re1<\/th>\n      <th>selfemp_re2<\/th>\n      <th>selfemp_re3<\/th>\n      <th>selfemp_re4<\/th>\n      <th>selfemp_re5<\/th>\n      <th>selfemp_be<\/th>\n      <th>wtime_con1<\/th>\n      <th>wtime_con2<\/th>\n      <th>wtime_con2_day<\/th>\n      <th>wtime_con2_week<\/th>\n      <th>wtime_con2_month<\/th>\n      <th>wtime_con3<\/th>\n      <th>wday<\/th>\n      <th>wday_week<\/th>\n      <th>wday_month<\/th>\n      <th>wtime<\/th>\n      <th>wtime_week<\/th>\n      <th>wtime_month<\/th>\n      <th>wtime2<\/th>\n      <th>wtime2_week<\/th>\n      <th>wtime2_month<\/th>\n      <th>ctime<\/th>\n      <th>ctime_777<\/th>\n      <th>ctime_888<\/th>\n      <th>ctime_999<\/th>\n      <th>ptime<\/th>\n      <th>ptime_week<\/th>\n      <th>ptime_month<\/th>\n      <th>wsector<\/th>\n      <th>wsector_etc<\/th>\n      <th>comp_size1<\/th>\n      <th>comp_size2<\/th>\n      <th>comp_size3<\/th>\n      <th>comp_size4<\/th>\n      <th>comp_female<\/th>\n      <th>comp_sjob<\/th>\n      <th>comp_emp<\/th>\n      <th>comp_emp_8888888<\/th>\n      <th>comp_emp_9999999<\/th>\n      <th>wduration<\/th>\n      <th>wduration_y<\/th>\n      <th>ch_downsizing<\/th>\n      <th>ch_tech<\/th>\n      <th>ch_restruct<\/th>\n      <th>ch_ic<\/th>\n      <th>ch_me<\/th>\n      <th>ch_ps<\/th>\n      <th>ch_ic_a<\/th>\n      <th>ch_me_a<\/th>\n      <th>ch_ps_a<\/th>\n      <th>hazard_phy1<\/th>\n      <th>hazard_phy2<\/th>\n      <th>hazard_phy3<\/th>\n      <th>hazard_phy4<\/th>\n      <th>hazard_phy5<\/th>\n      <th>hazard_phy6<\/th>\n      <th>hazard_phy7<\/th>\n      <th>hazard_phy8<\/th>\n      <th>hazard_phy9<\/th>\n      <th>hazard_erg1<\/th>\n      <th>hazard_erg2<\/th>\n      <th>hazard_erg3<\/th>\n      <th>hazard_erg4<\/th>\n      <th>hazard_erg5<\/th>\n      <th>hazard_erg6<\/th>\n      <th>hazard_psy1<\/th>\n      <th>hazard_psy2<\/th>\n      <th>hazard_psy3<\/th>\n      <th>safeinform<\/th>\n      <th>useequip1<\/th>\n      <th>useequip2<\/th>\n      <th>useequip3<\/th>\n      <th>wplace1<\/th>\n      <th>wplace2<\/th>\n      <th>wplace3<\/th>\n      <th>wplace4<\/th>\n      <th>wplace5<\/th>\n      <th>wplace5_etc<\/th>\n      <th>wplace_sl<\/th>\n      <th>wpalce_ch<\/th>\n      <th>wtime_night_a<\/th>\n      <th>wtime_sun_a<\/th>\n      <th>wtime_sat_a<\/th>\n      <th>wtime_long_a<\/th>\n      <th>wtime_night<\/th>\n      <th>wtime_sun<\/th>\n      <th>wtime_sat<\/th>\n      <th>wtime_long<\/th>\n      <th>wtime_resilience<\/th>\n      <th>wtime_length1<\/th>\n      <th>wtime_length2<\/th>\n      <th>wtime_length3<\/th>\n      <th>wtime_length4<\/th>\n      <th>wtime_length5<\/th>\n      <th>wshift<\/th>\n      <th>wshift_etc<\/th>\n      <th>wcomback<\/th>\n      <th>wtime_arr1<\/th>\n      <th>wtime_arr2<\/th>\n      <th>wtime_arr3<\/th>\n      <th>wtime_arr3_etc<\/th>\n      <th>wbalance<\/th>\n      <th>wwa1<\/th>\n      <th>wwa2<\/th>\n      <th>wwa3<\/th>\n      <th>wwa4<\/th>\n      <th>wwa5<\/th>\n      <th>wtime_ftwork<\/th>\n      <th>wtime_ftcomtool<\/th>\n      <th>wtime_private<\/th>\n      <th>winten1_1<\/th>\n      <th>winten1_2<\/th>\n      <th>winten2_1<\/th>\n      <th>winten2_2<\/th>\n      <th>winten3_1<\/th>\n      <th>winten3_2<\/th>\n      <th>winten3_3<\/th>\n      <th>winten3_4<\/th>\n      <th>winten3_5<\/th>\n      <th>winterrupt1<\/th>\n      <th>winterrupt2<\/th>\n      <th>condim1<\/th>\n      <th>condim2<\/th>\n      <th>condim3<\/th>\n      <th>condim4<\/th>\n      <th>condim5<\/th>\n      <th>condim6<\/th>\n      <th>decla1<\/th>\n      <th>decla2<\/th>\n      <th>decla3<\/th>\n      <th>winflu1<\/th>\n      <th>winflu2<\/th>\n      <th>winflu3<\/th>\n      <th>ass_cust1<\/th>\n      <th>ass_cust2_1<\/th>\n      <th>ass_cust2_2<\/th>\n      <th>ass_cust2_3<\/th>\n      <th>ass_cust2_4<\/th>\n      <th>ass_cust2_5<\/th>\n      <th>ass_cust2_6<\/th>\n      <th>ass_cust2_7<\/th>\n      <th>ass_cust2_8<\/th>\n      <th>ass_cust2_9<\/th>\n      <th>ass_cust2_etc<\/th>\n      <th>alter_task1<\/th>\n      <th>wteam1<\/th>\n      <th>wteam2<\/th>\n      <th>wteam3_1<\/th>\n      <th>wteam3_2<\/th>\n      <th>wteam3_3<\/th>\n      <th>wsituation1<\/th>\n      <th>wsituation2<\/th>\n      <th>wsituation3<\/th>\n      <th>wsituation4<\/th>\n      <th>wsituation5<\/th>\n      <th>wsituation6<\/th>\n      <th>wsituation7<\/th>\n      <th>wsituation8<\/th>\n      <th>wsituation9<\/th>\n      <th>wsituation10<\/th>\n      <th>wsituation11<\/th>\n      <th>wsituation12<\/th>\n      <th>wsituation13<\/th>\n      <th>wsituation14<\/th>\n      <th>emo_manual<\/th>\n      <th>suggest1<\/th>\n      <th>suggest2<\/th>\n      <th>suggest1_1<\/th>\n      <th>suggest2_1<\/th>\n      <th>boss_gender<\/th>\n      <th>manaqual1<\/th>\n      <th>manaqual2<\/th>\n      <th>manaqual3<\/th>\n      <th>manaqual4<\/th>\n      <th>manaqual5<\/th>\n      <th>skillmat<\/th>\n      <th>tra1<\/th>\n      <th>tra2<\/th>\n      <th>tra3<\/th>\n      <th>tra1_1<\/th>\n      <th>tra2_1<\/th>\n      <th>tra_ass1<\/th>\n      <th>tra_ask<\/th>\n      <th>comp_ass1<\/th>\n      <th>comp_ass2<\/th>\n      <th>comp_ass3<\/th>\n      <th>comp_ass4<\/th>\n      <th>comp_ass5<\/th>\n      <th>comp_ass6<\/th>\n      <th>comp_com1<\/th>\n      <th>comp_com2<\/th>\n      <th>comp_com3<\/th>\n      <th>emp_rep<\/th>\n      <th>disc1<\/th>\n      <th>disc2<\/th>\n      <th>disc3<\/th>\n      <th>disc4<\/th>\n      <th>disc5<\/th>\n      <th>disc6<\/th>\n      <th>disc7<\/th>\n      <th>disc8<\/th>\n      <th>disc9<\/th>\n      <th>disc10<\/th>\n      <th>disc11<\/th>\n      <th>heal_risk<\/th>\n      <th>heal_aff<\/th>\n      <th>heal_cond<\/th>\n      <th>heal_illhe<\/th>\n      <th>heal_lim1<\/th>\n      <th>heal_lim2<\/th>\n      <th>heal_lim3<\/th>\n      <th>heal_prob1<\/th>\n      <th>heal_prob2<\/th>\n      <th>heal_prob3<\/th>\n      <th>heal_prob4<\/th>\n      <th>heal_prob5<\/th>\n      <th>heal_prob6<\/th>\n      <th>heal_prob7<\/th>\n      <th>heal_prob7_etc<\/th>\n      <th>heal_prob1_1<\/th>\n      <th>heal_prob2_1<\/th>\n      <th>heal_prob3_1<\/th>\n      <th>heal_prob4_1<\/th>\n      <th>heal_prob5_1<\/th>\n      <th>heal_prob6_1<\/th>\n      <th>heal_prob7_1<\/th>\n      <th>sleep1<\/th>\n      <th>sleep2<\/th>\n      <th>sleep3<\/th>\n      <th>asb1<\/th>\n      <th>asb2<\/th>\n      <th>asb3<\/th>\n      <th>asb4<\/th>\n      <th>asb1_1<\/th>\n      <th>asb2_1<\/th>\n      <th>asb3_1<\/th>\n      <th>asb4_1<\/th>\n      <th>asb5<\/th>\n      <th>asb6<\/th>\n      <th>asb7<\/th>\n      <th>asb5_1<\/th>\n      <th>asb6_1<\/th>\n      <th>asb7_1<\/th>\n      <th>heal_abs1<\/th>\n      <th>heal_abs1_888<\/th>\n      <th>heal_abs1_999<\/th>\n      <th>heal_abs2<\/th>\n      <th>heal_abs2_888<\/th>\n      <th>heal_abs2_999<\/th>\n      <th>heal_abs3<\/th>\n      <th>heal_abs3_888<\/th>\n      <th>heal_abs3_999<\/th>\n      <th>heal_wsick1<\/th>\n      <th>heal_wsick2<\/th>\n      <th>heal_wsick2_888<\/th>\n      <th>heal_wsick2_999<\/th>\n      <th>who1<\/th>\n      <th>who2<\/th>\n      <th>who3<\/th>\n      <th>who4<\/th>\n      <th>who5<\/th>\n      <th>satisfaction<\/th>\n      <th>wstat1<\/th>\n      <th>wstat2<\/th>\n      <th>wstat3<\/th>\n      <th>wstat4<\/th>\n      <th>wstat5<\/th>\n      <th>wstat6<\/th>\n      <th>wstat7<\/th>\n      <th>weng1<\/th>\n      <th>weng2<\/th>\n      <th>weng3<\/th>\n      <th>weng4<\/th>\n      <th>weng5<\/th>\n      <th>selfemp_sw1<\/th>\n      <th>selfemp_sw2<\/th>\n      <th>selfemp_sw3<\/th>\n      <th>selfemp_sw4<\/th>\n      <th>imte1<\/th>\n      <th>imte2<\/th>\n      <th>imte3<\/th>\n      <th>imte4<\/th>\n      <th>imte5<\/th>\n      <th>job_c1<\/th>\n      <th>job_c1_666<\/th>\n      <th>job_c1_888<\/th>\n      <th>job_c1_999<\/th>\n      <th>job_c2<\/th>\n      <th>job_c3<\/th>\n      <th>woutside1<\/th>\n      <th>woutside2<\/th>\n      <th>woutside3<\/th>\n      <th>woutside4<\/th>\n      <th>woutside5<\/th>\n      <th>woutside1_1<\/th>\n      <th>woutside1_2<\/th>\n      <th>woutside1_88<\/th>\n      <th>woutside1_99<\/th>\n      <th>woutside2_1<\/th>\n      <th>woutside2_2<\/th>\n      <th>woutside2_88<\/th>\n      <th>woutside2_99<\/th>\n      <th>woutside3_1<\/th>\n      <th>woutside3_2<\/th>\n      <th>woutside3_88<\/th>\n      <th>woutside3_99<\/th>\n      <th>woutside4_1<\/th>\n      <th>woutside4_2<\/th>\n      <th>woutside4_88<\/th>\n      <th>woutside4_99<\/th>\n      <th>woutside5_1<\/th>\n      <th>woutside5_2<\/th>\n      <th>woutside5_88<\/th>\n      <th>woutside5_99<\/th>\n      <th>income_con<\/th>\n      <th>income_bal<\/th>\n      <th>income_pos1<\/th>\n      <th>income_pos2<\/th>\n      <th>income_pos3<\/th>\n      <th>income_pos4<\/th>\n      <th>income_pos5<\/th>\n      <th>income_pos6<\/th>\n      <th>income_pos7<\/th>\n      <th>income_pos8<\/th>\n      <th>income_pos9<\/th>\n      <th>income_pos10<\/th>\n      <th>income_pred<\/th>\n      <th>income_client<\/th>\n      <th>earning1<\/th>\n      <th>earning1_8888<\/th>\n      <th>earning1_9999<\/th>\n      <th>earning2<\/th>\n      <th>earning_total<\/th>\n      <th>edu<\/th>\n      <th>post_survey<\/th>\n      <th>TSEX<\/th>\n      <th>TAGE_GROUP<\/th>\n      <th>TAREA<\/th>\n      <th>TARA_SIZE<\/th>\n      <th>TEMP_TYPE<\/th>\n      <th>TEMP_STAT<\/th>\n      <th>OCC<\/th>\n      <th>OCC2<\/th>\n      <th>IND<\/th>\n      <th>IND2<\/th>\n      <th>TCOMP_SIZE1<\/th>\n      <th>TCOMP_SIZE2<\/th>\n      <th>TCOMP_SIZE3<\/th>\n      <th>TCOMP_SIZE4<\/th>\n      <th>TWTIME_WEEK<\/th>\n      <th>TWTIME_WEEK2<\/th>\n      <th>TWTIME_WEEK3<\/th>\n      <th>TEDU<\/th>\n      <th>TEARNING<\/th>\n      <th>TWDURATION<\/th>\n      <th>sleep1in<\/th>\n      <th>sleep2in<\/th>\n      <th>sleep3in<\/th>\n      <th>sleepgp<\/th>\n      <th>wbalancegp<\/th>\n      <th>wwa1gp<\/th>\n      <th>wwa2gp<\/th>\n      <th>wwa3gp<\/th>\n      <th>wwa4gp<\/th>\n      <th>wwa5gp<\/th>\n      <th>sexgp<\/th>\n      <th>agegp<\/th>\n      <th>edugp<\/th>\n      <th>njob<\/th>\n      <th>backpain<\/th>\n      <th>empgp<\/th>\n      <th>whgp<\/th>\n      <th>shiftWork<\/th>\n      <th>shortReturn<\/th>\n      <th>satisInv<\/th>\n      <th>shiftShort<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,51,52,53,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,180,181,182,183,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,427,429,430,431,432,433,434,435,436,437,438,439,440,441,458]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br><br> &gt; 설문지와 변수설명 파일은 아래와 같습니다. <br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">"https://raw.githubusercontent.com/jinhaslab/opendata/main/kwcs/pdf3.pdf"</span>, <span class="st">"data/kwcs6thkorea.pdf"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="select" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="select"><span class="header-section-number">4.3</span> select</h2>
<p>필요한 데이터를 종으로, columns 로 분할하는 것입니다. 즉 변수명으로 데이터를 분할하는 것입니다. 선택될 변수는 변수명과 변수번호(왼쪽 부터 1번)를 이용해서 할 수 있습니다. <br></p>
<p>처음부터 5번째 변수까지 선택해 보겠습니다 .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, wt, area, hh_num, hm_01_gender) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
     id    wt area      hh_num hm_01_gender
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl+lbl&gt;  &lt;dbl&gt; &lt;dbl+lbl&gt;   
1     2 0.137 3 [대구]       1 2 [여성]    
2     3 0.350 3 [대구]       1 2 [여성]    
3     6 0.156 7 [울산]       1 2 [여성]    
4     8 0.228 7 [울산]       3 1 [남성]    
5     9 0.168 7 [울산]       1 1 [남성]    
6    10 0.675 6 [대전]       4 2 [여성]    </code></pre>
</div>
</div>
<p>변수명에 job이 들어 있는 경우 선택해 보겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"job"</span>)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
  job1     job2  job3  job3_…¹ comp_s…² job_c1 job_c1…³ job_c…⁴ job_c…⁵ job_c2  
  &lt;dbl+lb&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dbl+lb&gt; &lt;dbl+&gt; &lt;dbl+lb&gt; &lt;dbl+l&gt; &lt;dbl+l&gt; &lt;dbl+lb&gt;
1 1 [1개]  NA    NA    ""       2 [대… 60     NA     … NA      NA       1 [그…
2 1 [1개]  NA    NA    ""      NA     … 70     NA     … NA      NA      NA     …
3 1 [1개]  NA    NA    ""       1 [대… 70     NA     … NA      NA      NA     …
4 1 [1개]  NA    NA    ""      NA     … 65     NA     … NA      NA      NA     …
5 1 [1개]  NA    NA    ""       3 [대… NA      1 [가… NA      NA       1 [그…
6 1 [1개]  NA    NA    ""       2 [대… NA      1 [가… NA      NA      NA     …
# … with 2 more variables: job_c3 &lt;dbl+lbl&gt;, njob &lt;chr&gt;, and abbreviated
#   variable names ¹​job3_etc, ²​comp_sjob, ³​job_c1_666, ⁴​job_c1_888, ⁵​job_c1_999</code></pre>
</div>
</div>
<p>select안에서는 ” ” 안에 문자가 변수 명으로 인식됩니다. 이것은 매우 중요한 개념입니다. 아래의 두 코드는 같은 결과를 줍니다. 외부에서 문자를 입력 받았어도, 바로 적용할 수 있다는 의미 입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">"job1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 41,108 × 1
   job1     
   &lt;dbl+lbl&gt;
 1 1 [1개]  
 2 1 [1개]  
 3 1 [1개]  
 4 1 [1개]  
 5 1 [1개]  
 6 1 [1개]  
 7 1 [1개]  
 8 1 [1개]  
 9 1 [1개]  
10 1 [1개]  
# … with 41,098 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span> <span class="fu">select</span>(job1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 41,108 × 1
   job1     
   &lt;dbl+lbl&gt;
 1 1 [1개]  
 2 1 [1개]  
 3 1 [1개]  
 4 1 [1개]  
 5 1 [1개]  
 6 1 [1개]  
 7 1 [1개]  
 8 1 [1개]  
 9 1 [1개]  
10 1 [1개]  
# … with 41,098 more rows</code></pre>
</div>
</div>
<p>제외하는 방법은 <code>-</code>를 사용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> kwcs <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, wt, area) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
     id    wt area     
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl+lbl&gt;
1     2 0.137 3 [대구] 
2     3 0.350 3 [대구] 
3     6 0.156 7 [울산] 
4     8 0.228 7 [울산] 
5     9 0.168 7 [울산] 
6    10 0.675 6 [대전] </code></pre>
</div>
</div>
<p><code>test</code>라는 데이터셑을 만들었습니다. <code>id</code>, <code>wt</code>, <code>area</code>라는 변수를 갖은 데이터 입니다. 여기서 id라는 변수를 제외하겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
     wt area     
  &lt;dbl&gt; &lt;dbl+lbl&gt;
1 0.137 3 [대구] 
2 0.350 3 [대구] 
3 0.156 7 [울산] 
4 0.228 7 [울산] 
5 0.168 7 [울산] 
6 0.675 6 [대전] </code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
     wt area     
  &lt;dbl&gt; &lt;dbl+lbl&gt;
1 0.137 3 [대구] 
2 0.350 3 [대구] 
3 0.156 7 [울산] 
4 0.228 7 [울산] 
5 0.168 7 [울산] 
6 0.675 6 [대전] </code></pre>
</div>
</div>
</section>
<section id="filter" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="filter"><span class="header-section-number">4.4</span> filter</h2>
<p><code>filter</code> 는 특정 조건에 해당하는 행(row)를 선택합니다. 예를 들어 성별 중 남성만, 여성만 선택한 다는가 특정 연령 범위를 선택합니다. 이때 몇몇 조건문을 사용합니다. <code>==</code>은 같다는 뜻입니다. 아래와 같이 활용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(AGE <span class="sc">==</span><span class="dv">55</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  TSEX        AGE
  &lt;dbl+lbl&gt; &lt;dbl&gt;
1 2 [여성]     55
2 2 [여성]     55
3 2 [여성]     55
4 1 [남성]     55
5 1 [남성]     55
6 1 [남성]     55</code></pre>
</div>
</div>
<p><code>&amp;</code>는 and <code>|</code>는 or 을 의미합니다. 성별과 연령을 동시에 조건을 주도록 하겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TSEX <span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> AGE <span class="sc">&lt;</span><span class="dv">17</span>) <span class="co"># or == |</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 2
# … with 2 variables: TSEX &lt;dbl+lbl&gt;, AGE &lt;dbl&gt;</code></pre>
</div>
</div>
<p><code>!</code>는 아니라는 표시입니다. 이것을 통해서 간단하게 여러 조건을 생략시킬 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TSEX <span class="sc">!=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(AGE <span class="sc">&gt;=</span><span class="dv">16</span> <span class="sc">&amp;</span> AGE <span class="sc">&lt;</span><span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 2
# … with 2 variables: TSEX &lt;dbl+lbl&gt;, AGE &lt;dbl&gt;</code></pre>
</div>
</div>
<p><code>%in%</code>를 사용하면 여러 조건을 나열하는 방법으로 선택할 수 있습니다. 명목변수 등에 사용하기 편합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TSEX <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> <span class="co"># %in% allow multiple filtering</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>AGE <span class="sc">&gt;</span><span class="dv">16</span>) <span class="co"># ! means negative condition</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 2
# … with 2 variables: TSEX &lt;dbl+lbl&gt;, AGE &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="arrange" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="arrange"><span class="header-section-number">4.5</span> arrange</h2>
<p>arrange는 순차 정렬하는 함수입니다. 정방향, 역방향이 가능합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(AGE) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(AGE) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
    AGE
  &lt;dbl&gt;
1    19
2    19
3    19
4    19
5    19
6    19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(AGE) <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(AGE)) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
    AGE
  &lt;dbl&gt;
1    69
2    69
3    69
4    69
5    69
6    69</code></pre>
</div>
</div>
</section>
<section id="mutate" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="mutate"><span class="header-section-number">4.6</span> mutate</h2>
<p><code>mutate</code>는 변수를 변형하는 가장 기본이면서 자주 사용되는 함수 입니다. 반드시 익숙해여쟈 하는 함수 입니다. mutate 단독으로 쓰이기 보다는 여러 조건문인 <code>ifelse</code>, <code>case_when</code>, <code>recode</code>를 이용합니다. 될수 있으면 <code>ifelse</code>보다는 <code>case_when</code>을 이용하는 것이 향후 SQL 등을 사용할 때 더 편할 수 있어 추천합니다. <br> 남녀가 현재는 1인 남자, 2가 여자 입니다. 이를 male, female로 바꾸겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexgp =</span> <span class="fu">case_when</span>(</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    TSEX<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">'male'</span>, </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    TSEX<span class="sc">==</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">'female'</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  TSEX        AGE sexgp 
  &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;chr&gt; 
1 2 [여성]     54 female
2 2 [여성]     64 female
3 2 [여성]     65 female
4 2 [여성]     57 female
5 1 [남성]     38 male  
6 2 [여성]     47 female</code></pre>
</div>
</div>
<p>이번에는 연령을 5세 단위로 바꾸어 보겠습니다. 그리고 test1이라는 데이터로 변형시켜보겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>test1 <span class="ot">=</span> kwcs <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexgp =</span> <span class="fu">case_when</span>(</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    TSEX<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">'male'</span>, </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    TSEX<span class="sc">==</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">'female'</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agegp =</span> <span class="fu">case_when</span>(</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">25</span> <span class="sc">~</span> <span class="st">"&lt;25"</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"&lt;30"</span>, </span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">35</span> <span class="sc">~</span> <span class="st">"&lt;35"</span>, </span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">40</span> <span class="sc">~</span> <span class="st">"&lt;40"</span>, </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">45</span> <span class="sc">~</span> <span class="st">"&lt;45"</span>, </span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">50</span> <span class="sc">~</span> <span class="st">"&lt;50"</span>,</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">55</span> <span class="sc">~</span> <span class="st">"&lt;55"</span>, </span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">60</span> <span class="sc">~</span> <span class="st">"&lt;60"</span>,</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"\u226560"</span> <span class="co"># 나머지는 모두 &gt;65 (\u2265는 크거나 같다는 symbol)</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>test1에는 sexgp가 female , male 이라고 되어 있네요, 이때 female을 Female로 대문자 변화, male을 Male로 대문자 변환해 보겠습니다. recode를 사용하겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>test1 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   TSEX        AGE sexgp  agegp
   &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;
 1 2 [여성]     54 female &lt;55  
 2 2 [여성]     64 female ≥60  
 3 2 [여성]     65 female ≥60  
 4 2 [여성]     57 female &lt;60  
 5 1 [남성]     38 male   &lt;40  
 6 2 [여성]     47 female &lt;50  
 7 2 [여성]     54 female &lt;55  
 8 2 [여성]     35 female &lt;40  
 9 2 [여성]     68 female ≥60  
10 2 [여성]     69 female ≥60  </code></pre>
</div>
</div>
<p>만연 female, male 두개뿐이라면 이 방법이 쉬울 수 있습니다. case_when과 female, male을 적절히 사용하면 되겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>test1 <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sexgp =</span> <span class="fu">recode</span>(sexgp, </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"female"</span> <span class="ot">=</span> <span class="st">"Female"</span>, </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"male"</span>   <span class="ot">=</span> <span class="st">"Male"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
   TSEX        AGE sexgp  agegp Sexgp 
   &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; 
 1 2 [여성]     54 female &lt;55   Female
 2 2 [여성]     64 female ≥60   Female
 3 2 [여성]     65 female ≥60   Female
 4 2 [여성]     57 female &lt;60   Female
 5 1 [남성]     38 male   &lt;40   Male  
 6 2 [여성]     47 female &lt;50   Female
 7 2 [여성]     54 female &lt;55   Female
 8 2 [여성]     35 female &lt;40   Female
 9 2 [여성]     68 female ≥60   Female
10 2 [여성]     69 female ≥60   Female</code></pre>
</div>
</div>
<p>60세 미만을 young, 60세 이상을 old로 구분하여 young female, old female, young male, old male로 바꾸어 보겠습니다. case_when에는 처음에 사용한 것을 제외하고 나머지에서라는 뜻이 포함되어 있지요. 즉 ifelse 가 이미 숨어있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>test1 <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intgp =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">60</span> <span class="sc">&amp;</span> TSEX <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"young male"</span>, </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">60</span> <span class="sc">&amp;</span> TSEX <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"young female"</span>, </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    TSEX <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"old male"</span>, </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    TSEX <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"old female"</span> </span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
   TSEX        AGE sexgp  agegp intgp       
   &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       
 1 2 [여성]     54 female &lt;55   young female
 2 2 [여성]     64 female ≥60   old female  
 3 2 [여성]     65 female ≥60   old female  
 4 2 [여성]     57 female &lt;60   young female
 5 1 [남성]     38 male   &lt;40   young male  
 6 2 [여성]     47 female &lt;50   young female
 7 2 [여성]     54 female &lt;55   young female
 8 2 [여성]     35 female &lt;40   young female
 9 2 [여성]     68 female ≥60   old female  
10 2 [여성]     69 female ≥60   old female  </code></pre>
</div>
</div>
</section>
<section id="group_by" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="group_by"><span class="header-section-number">4.7</span> group_by</h2>
<p>group_by는 데이터 탐색에서 가장 많이 사용되면, 연속변수는 summrise와 명목변수는 count와 같이 사용됩니다. group_by에 의해 변수값에 따라 정리가 되게 됩니다. 새로운 변수은 <code>heal_prob1</code>를 사용해 보겠습니다. heal_prob1는 요통여 부이고, 요통이 있으면 1, 없으면 2로 되어 있습니다. 결측값, 무응답이 많으니 heal_prob1 에 무응답이 있는 경우 제외하겠습니다. NA 결측값은 is.na(변수)로 찾을 수 있습니다. 우선 count로 해보겠습니다 .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(heal_prob1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  heal_prob1     n
  &lt;dbl+lbl&gt;  &lt;int&gt;
1  1 [있다]  11642
2  2 [없다]  29437
3 NA            29</code></pre>
</div>
</div>
<p>NA가 59개 있네요. <br> 아래와 같이 sexgp별로 요통을 호소하는 사람이 얼마나 있는지 확인해 보겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(heal_prob1)) <span class="sc">%&gt;%</span> <span class="co"># is.na() 즉 NA이면에서 !는 NA가 아니면이라는 뜻</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE, heal_prob1) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexgp=</span><span class="fu">case_when</span>(</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    TSEX<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">"Men"</span>, </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Female"</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sexgp) <span class="sc">%&gt;%</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(heal_prob1) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Groups:   sexgp [2]
  sexgp  heal_prob1     n
  &lt;chr&gt;  &lt;dbl+lbl&gt;  &lt;int&gt;
1 Female 1 [있다]    6771
2 Female 2 [없다]   15104
3 Men    1 [있다]    4871
4 Men    2 [없다]   14333</code></pre>
</div>
</div>
<p>연령별로는 어떠한 비율인지 확인해 보겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(heal_prob1)) <span class="sc">%&gt;%</span> <span class="co"># is.na() 즉 NA이면에서 !는 NA가 아니면이라는 뜻</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE, heal_prob1) <span class="sc">%&gt;%</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexgp=</span><span class="fu">case_when</span>(</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    TSEX<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">"Men"</span>, </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Female"</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agegp =</span> <span class="fu">case_when</span>(</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">25</span> <span class="sc">~</span> <span class="st">"&lt;25"</span>,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"&lt;30"</span>, </span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">35</span> <span class="sc">~</span> <span class="st">"&lt;35"</span>, </span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">40</span> <span class="sc">~</span> <span class="st">"&lt;40"</span>, </span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">45</span> <span class="sc">~</span> <span class="st">"&lt;45"</span>, </span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">50</span> <span class="sc">~</span> <span class="st">"&lt;50"</span>,</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">55</span> <span class="sc">~</span> <span class="st">"&lt;55"</span>, </span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">60</span> <span class="sc">~</span> <span class="st">"&lt;60"</span>,</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"\u226560"</span> <span class="co"># 나머지는 모두 &gt;65 (\u2265는 크거나 같다는 symbol)</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>  ))  <span class="sc">%&gt;%</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agegp) <span class="sc">%&gt;%</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(heal_prob1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 3
# Groups:   agegp [9]
   agegp heal_prob1     n
   &lt;chr&gt; &lt;dbl+lbl&gt;  &lt;int&gt;
 1 &lt;25   1 [있다]     144
 2 &lt;25   2 [없다]    1263
 3 &lt;30   1 [있다]     397
 4 &lt;30   2 [없다]    2462
 5 &lt;35   1 [있다]     578
 6 &lt;35   2 [없다]    2954
 7 &lt;40   1 [있다]     891
 8 &lt;40   2 [없다]    3430
 9 &lt;45   1 [있다]    1103
10 &lt;45   2 [없다]    3679
11 &lt;50   1 [있다]    1427
12 &lt;50   2 [없다]    3892
13 &lt;55   1 [있다]    1718
14 &lt;55   2 [없다]    4043
15 &lt;60   1 [있다]    2046
16 &lt;60   2 [없다]    3616
17 ≥60   1 [있다]    3338
18 ≥60   2 [없다]    4098</code></pre>
</div>
</div>
<p>한눈에 파악하기 어렵네요. 그럼 어떻게 하는 것이 좋을 까요, mutate를 통해 율을 구해보는 것이 좋겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(heal_prob1)) <span class="sc">%&gt;%</span> <span class="co"># is.na() 즉 NA이면에서 !는 NA가 아니면이라는 뜻</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE, heal_prob1) <span class="sc">%&gt;%</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexgp=</span><span class="fu">case_when</span>(</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    TSEX<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">"Men"</span>, </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Female"</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agegp =</span> <span class="fu">case_when</span>(</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">25</span> <span class="sc">~</span> <span class="st">"&lt;25"</span>,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"&lt;30"</span>, </span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">35</span> <span class="sc">~</span> <span class="st">"&lt;35"</span>, </span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">40</span> <span class="sc">~</span> <span class="st">"&lt;40"</span>, </span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">45</span> <span class="sc">~</span> <span class="st">"&lt;45"</span>, </span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">50</span> <span class="sc">~</span> <span class="st">"&lt;50"</span>,</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">55</span> <span class="sc">~</span> <span class="st">"&lt;55"</span>, </span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">60</span> <span class="sc">~</span> <span class="st">"&lt;60"</span>,</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"\u226560"</span> <span class="co"># 나머지는 모두 &gt;65 (\u2265는 크거나 같다는 symbol)</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  ))  <span class="sc">%&gt;%</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(agegp) <span class="sc">%&gt;%</span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(heal_prob1) <span class="sc">%&gt;%</span></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span> <span class="co">#proportion을 구함</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(heal_prob1 <span class="sc">==</span> <span class="dv">1</span>) <span class="co"># 요통이 있다고한 사람을 비율만 남김. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 4
# Groups:   agegp [9]
  agegp heal_prob1     n  prob
  &lt;chr&gt; &lt;dbl+lbl&gt;  &lt;int&gt; &lt;dbl&gt;
1 &lt;25   1 [있다]     144 0.102
2 &lt;30   1 [있다]     397 0.139
3 &lt;35   1 [있다]     578 0.164
4 &lt;40   1 [있다]     891 0.206
5 &lt;45   1 [있다]    1103 0.231
6 &lt;50   1 [있다]    1427 0.268
7 &lt;55   1 [있다]    1718 0.298
8 &lt;60   1 [있다]    2046 0.361
9 ≥60   1 [있다]    3338 0.449</code></pre>
</div>
</div>
<p>요통의 유병율이 연령이 증가할 수록 점차 증가하고 있네요, 남녀의 차이가 있을 까요? 남녀별 구분을 위해 group_by( )에 sexgp를 추가했습니다 .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>smry1 <span class="ot">=</span> kwcs <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(heal_prob1)) <span class="sc">%&gt;%</span> <span class="co"># is.na() 즉 NA이면에서 !는 NA가 아니면이라는 뜻</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE, heal_prob1) <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexgp=</span><span class="fu">case_when</span>(</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    TSEX<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">"Men"</span>, </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Female"</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agegp =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">25</span> <span class="sc">~</span> <span class="st">"&lt;25"</span>,</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"&lt;30"</span>, </span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">35</span> <span class="sc">~</span> <span class="st">"&lt;35"</span>, </span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">40</span> <span class="sc">~</span> <span class="st">"&lt;40"</span>, </span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">45</span> <span class="sc">~</span> <span class="st">"&lt;45"</span>, </span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">50</span> <span class="sc">~</span> <span class="st">"&lt;50"</span>,</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">55</span> <span class="sc">~</span> <span class="st">"&lt;55"</span>, </span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>    AGE <span class="sc">&lt;</span><span class="dv">60</span> <span class="sc">~</span> <span class="st">"&lt;60"</span>,</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"\u226560"</span> <span class="co"># 나머지는 모두 &gt;65 (\u2265는 크거나 같다는 symbol)</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>  ))  <span class="sc">%&gt;%</span></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sexgp, agegp) <span class="sc">%&gt;%</span> <span class="co"># 성별, 연령별</span></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(heal_prob1) <span class="sc">%&gt;%</span></span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span> <span class="co">#proportion을 구함</span></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(heal_prob1 <span class="sc">==</span> <span class="dv">1</span>) <span class="co"># 요통이 있다고한 사람을 비율만 남김. </span></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>smry1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 5
# Groups:   sexgp, agegp [18]
   sexgp  agegp heal_prob1     n   prob
   &lt;chr&gt;  &lt;chr&gt; &lt;dbl+lbl&gt;  &lt;int&gt;  &lt;dbl&gt;
 1 Female &lt;25   1 [있다]      79 0.105 
 2 Female &lt;30   1 [있다]     225 0.164 
 3 Female &lt;35   1 [있다]     314 0.180 
 4 Female &lt;40   1 [있다]     416 0.205 
 5 Female &lt;45   1 [있다]     558 0.236 
 6 Female &lt;50   1 [있다]     761 0.266 
 7 Female &lt;55   1 [있다]    1041 0.309 
 8 Female &lt;60   1 [있다]    1316 0.390 
 9 Female ≥60   1 [있다]    2061 0.515 
10 Men    &lt;25   1 [있다]      65 0.0997
11 Men    &lt;30   1 [있다]     172 0.116 
12 Men    &lt;35   1 [있다]     264 0.148 
13 Men    &lt;40   1 [있다]     475 0.207 
14 Men    &lt;45   1 [있다]     545 0.225 
15 Men    &lt;50   1 [있다]     666 0.271 
16 Men    &lt;55   1 [있다]     677 0.284 
17 Men    &lt;60   1 [있다]     730 0.319 
18 Men    ≥60   1 [있다]    1277 0.372 </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>summarise</p>
</blockquote>
<p><code>summarise</code>는 colum 별로 정리하여 나타낸는 함수 입니다. 이때 주로 같이 사용하는 함수는 mean, sd, median, max, min 등이며, quantile도 많이 사용됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_age =</span> <span class="fu">mean</span>(AGE), </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">std_age  =</span> <span class="fu">sd</span>(AGE))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_age std_age
     &lt;dbl&gt;   &lt;dbl&gt;
1     47.0    12.4</code></pre>
</div>
</div>
<p>group_by와 함께 사용해 볼까요?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>kwcs <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(heal_prob1)) <span class="sc">%&gt;%</span> <span class="co"># is.na() 즉 NA이면에서 !는 NA가 아니면이라는 뜻</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TSEX, AGE, heal_prob1) <span class="sc">%&gt;%</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexgp=</span><span class="fu">case_when</span>(</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    TSEX<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">"Men"</span>, </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Female"</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sexgp) <span class="sc">%&gt;%</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_age =</span> <span class="fu">mean</span>(AGE), </span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">std_age  =</span> <span class="fu">sd</span>(AGE))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  sexgp  mean_age std_age
  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1 Female     47.6    12.2
2 Men        46.3    12.5</code></pre>
</div>
</div>
<p>중요한 부분인 group_by를 한후에 group을 해제하기 위해서는 ungroup()을 해주어야 합니다. 향후 Table 만들기 등에서 활용되니 기역해 주세요.</p>
</section>
<section id="merge-join" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="merge-join"><span class="header-section-number">4.8</span> merge, join</h2>
<p>이번에는 두개의 테이블을 하나로 만들어 보겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">var1 =</span> <span class="fu">c</span>(<span class="st">"a1"</span>, <span class="st">"a2"</span>))</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>tab2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="at">var2 =</span> <span class="fu">c</span>(<span class="st">"b1"</span>, <span class="st">"b2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>tab1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
     id var1 
  &lt;dbl&gt; &lt;chr&gt;
1     1 a1   
2     2 a2   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>tab2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
     id var2 
  &lt;dbl&gt; &lt;chr&gt;
1     2 b1   
2     3 b2   </code></pre>
</div>
</div>
<p>이둘을 합쳐 보겠습니다. &gt;full join</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>tab1 <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(tab2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"id"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
     id var1  var2 
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 a1    &lt;NA&gt; 
2     2 a2    b1   
3     3 &lt;NA&gt;  b2   </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>inner join</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>tab1 <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(tab2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"id"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
     id var1  var2 
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     2 a2    b1   </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>right join</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>tab1 <span class="sc">%&gt;%</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(tab2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"id"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
     id var1  var2 
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     2 a2    b1   
2     3 &lt;NA&gt;  b2   </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>left join</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>tab1 <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(tab2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"id"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
     id var1  var2 
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 a1    &lt;NA&gt; 
2     2 a2    b1   </code></pre>
</div>
</div>
<p>어떻게 결과가 예상과 같았나요? 아래와 같이 정리할 수 있습니다.</p>
<p><img src="img/tidy_join_fig.PNG" width="600" height="300"></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>

<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./231_dataimportsave.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">데이터 불러오기</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./245_datamanipulation_for_table.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipulation for table_1</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>